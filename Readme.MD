# Mattermost Voting Bot

## Содержание
- [Описание](#описание)
- [Функциональность](#функциональность)
- [Установка](#установка)
- [Команды бота](#команды-бота)

## Описание
Mattermost Voting Bot — это бот для организации голосований в чате Mattermost. Он позволяет создавать голосования, голосовать, просматривать результаты, завершать и удалять голосования.

## Функциональность
- Создание голосования
- Голосование за предложенные варианты
- Просмотр текущих результатов
- Завершение голосования
- Удаление голосования

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/Maksim-512/mattermost-bot.git
cd mattermost-bot
```

2. Создать .env файл в корне проекта и указать настройки:
```dotenv
MY_TEAM="VK"
MY_TOKEN="BotToken"
MY_CHANNEL="town-square"
MY_SERVER=http://mattermost:8065
MY_USERNAME="username"
TARANTOOL_ADDRESS=tarantool:3301
```

- MY_TEAM: Укажите название вашей команды в Mattermost.
- MY_TOKEN: Вставьте ваш API токен бота.
- MY_CHANNEL: Укажите канал, в котором бот будет работать.
- MY_SERVER: Укажите адрес вашего сервера Mattermost.
- MY_USERNAME: Укажите ваш username.
- TARANTOOL_ADDRESS: Укажите адрес и порт для подключения к Tarantool.

3. Запустите сервисы:
```bash
cd docker
docker compose -f docker-compose.yml -f docker-compose.without-nginx.yml up -d --build
```


## Команды бота

Бот взаимодействует через команды в Mattermost.

### 1. Создать голосование

```text
@system-bot create "Как дела?" "Вариант 1" "Вариант 2"
```

### Ответ:
```text
Создано новое голосование
ID: 606d0b9c-2f88-472d-a2cc-6df18a1b9063
Вопрос: Как дела?
Варианты:
1. Вариант 1
2. Вариант 2
   Для голосования: @system-bot vote 606d0b9c-2f88-472d-a2cc-6df18a1b9063 <номер варианта>
```

### 2. Проголосовать

```text
@system-bot vote 606d0b9c-2f88-472d-a2cc-6df18a1b9063 Вариант 1
```

### Ответ:

```text
Ваш голос за вариант "Вариант 1" учтён!
Просмотреть результаты: @system-bot results 606d0b9c-2f88-472d-a2cc-6df18a1b9063
```


### 3. Просмотр результатов

```text
@system-bot results 606d0b9c-2f88-472d-a2cc-6df18a1b9063
```

### Ответ:

```text
Результаты голосования
Вопрос: Как дела?
Вариант 1: 1 голос
Вариант 2: 0 голосов
Всего голосов: 1
```

### 4. Завершение голосования (только создатель)

```text
@system-bot close 606d0b9c-2f88-472d-a2cc-6df18a1b9063
```

### Ответ:

```text
Голосование 606d0b9c-2f88-472d-a2cc-6df18a1b9063 успешно завершено!
```


### 5. Удаление голосования (только создатель)

```text
@system-bot delete 606d0b9c-2f88-472d-a2cc-6df18a1b9063
```

### Ответ:

```text
Голосование 606d0b9c-2f88-472d-a2cc-6df18a1b9063 успешно удалено!
```

